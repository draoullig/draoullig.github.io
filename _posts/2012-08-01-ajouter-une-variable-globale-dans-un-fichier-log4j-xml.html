---
layout: post
title: Variable globale dans un fichier log4j.xml
date: 2012-08-01 07:28:03.000000000 +02:00
type: post
published: true
status: publish
categories:
- Informatique
tags: []
meta:
  _edit_last: '1'
author:
  login: superuser
  email: frederic.gillouard@gmail.com
  display_name: superuser
  first_name: ''
  last_name: ''
---
<p>Dans un fichier log4j il peut être intéressant de déclarer une variable globale pour par exemple centraliser le répertoire de destination des fichiers.</p>
<p>Pour cela il faut utiliser le mot clé ENTITY pour déclarer la variable dans l'entête. Voici un exemple pour expliquer cette utilisation :</p>
<pre class="lang:sh decode:true  title="Constructeur ClientControleur">
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" [

  &lt;!ENTITY REP_DEST "/opt/logs/exemple/"&gt;

]&gt;

&lt;log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;

  &lt;!-- Appender Default --&gt;

  &lt;appender name="Default" class="org.apache.log4j.FileAppender"&gt;

    &lt;param name="File" value="&REP_DEST;/default.log" /&gt;

    &lt;param name="Append" value="false"/&gt;

    &lt;layout class="org.apache.log4j.PatternLayout"&gt;

      &lt;param name="ConversionPattern" value="%d [%-5p] %37c (%M() ligne %L) %m%n"/&gt;

    &lt;/layout&gt;

  &lt;/appender&gt;

  &lt;!-- Par défaut --&gt;

  &lt;root&gt;

    &lt;level value="DEBUG" /&gt;

    &lt;appender-ref ref="Default" /&gt;

  &lt;/root&gt;

&lt;/log4j:configuration&gt;
</pre>
